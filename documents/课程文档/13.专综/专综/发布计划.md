# 发布计划

## 发布人员

1. 发布整体流程监控由项目负责人负责（**石稼晟**）
2. 开发环境由开发人员内部负责（**后端：李翠琪、陈晓雯；前端：方浩、付诚**）
3. 测试环境由测试人员负责（**石稼晟、付诚、陈晓雯**）
4. 预热环境、正式环境由运维人员负责（**李翠琪**）
5. 数据库操作均由DBA统一负责（**方浩**）

## 发布计划表

| 发布顺序 |     系统名称     |    版本号     |    发布依赖     | 发布分支 | 开发人员 | 测试人员 |
| :------: | :--------------: | :-----------: | :-------------: | :------: | :------: | :------: |
|    1     | boying database  | Release 1.0.0 |       无        |    ——    |   方浩   |  石稼晟  |
|    2     |   boying-user    | 1.0-SNAPSHOT  | boying database |  master  |  陈晓雯  |   付诚   |
|    3     |   boying-admin   | 1.0-SNAPSHOT  | boying database |  master  |  李翠琪  |   付诚   |
|    4     |    boying-web    |    v1.0.0     |   boying-user   |  master  |   方浩   |  石稼晟  |
|    5     | boying-admin-web |    v1.0.0     |  boying-admin   |  master  |   付诚   |  陈晓雯  |

## 发布流程

在已开发完毕的各系统正式部署生产环境前要严格按照以下流程进行上线前检查。所有流程检查通过后，计划于2021年6月14日 12:00分正式发布。

### 一、 提交测试

开发人员在功能开发完毕后首先配置开发环境，并将系统部署至开发环境。在开发环境经过自测通过后提交测试代码，并开始撰写上线方案。(上线方案须包括新增的外部应用程序安装，应用程序部署顺序及应用关联性、是否关闭其他应用服务，数据库脚本，制定合理的上线时间，涉及的服务影响范围以及上线失败的回滚步骤。)并提交相关技术负责人审核，在审核过后邮件给相关测试人员。
b) 测试人员根据模块功能文档并制定测试方案，测试用例，特别注意临界点测试方案。
c) 测试人员通过自动化部署平台根据提供的分支号依照上线方案进行自动化部署，涉及数据库操作可提请DBA操作。
d) 记录各种数据测试结果及测试问题，并交由相关开发人员进行二次迭代处理，该点须交付测试结果报告。
e) 内测完毕后交由相关业务及需求人员进行集成测试，并请测试人员记录测试结果及问题，交由相关开发人员进行再次迭代。该点须交付测试方案测试结果报告。

### 二、 预热发布

a) 测试人员在测试环境测试并跟踪修改bug达到上线标准（没有A、B级bug，C 级bug达到要求）时。开始部署预热环境，测试人员对现有功能在预热环境上进行验收测试（重新执行case）。紧急Bug修改走补丁/hotfix流程。不影响功能的bug留到下次版本解决，确认达到上线标准。
b) 如达到上线标准，测试人员发起邮件通知相关开发人员、产品人员，准备正式上线发布流程。

### 三、 正式上线

a) 在测试人员确认项目具备上线条件下，正式上线前，开发负责人须发起部署大会，召集相关开发人员、测试人员、产品人员、运维人员讨论此次部署事项(介绍项目的相应负责人员，数据库脚本执行，部署顺序，应用程序关联，部署时间点，部署回滚方案，包括数据库回滚和应用程序回滚)，最后生成会议纪要并发送邮件。
b) 确认上线之后，测试人员邮件上线方案，数据库脚本，应用分支号给运维人员及DBA，DBA应提前执行数据库脚本，应用部署须通过自动化部署平台进行部署，部署系统应在应用系统中记录当前分支号，以便后续应用回滚使用。在部署中出现错误，及时通知相关开发人员。如若问题不能在计划内时间解决，执行回滚方案。
c) 运维，DBA在操作完成时均需要回复邮件，并说明操作步骤结果。
d) 发布完成后运维人员回复邮件通知测试人员、业务及需求人员进行线上测试。测试结果及问题,提交至开发人员。如若出现问题不能在计划内时间解决，执行回滚方案，并进行迭代改进。
e) （紧急Bug修改走补丁/hotfix流程。不影响功能的bug留到下次版本解决。）。测试通过后测试人员回复邮件，发布结束。

### 四、 应用服务监控

a) 运维人员添加新增外部应用服务监控和新增云主机的系统监控
b) 运维人员对相关业务保持上线后正式生产系统进行有计划地监控其服务的性能和可用性，及时发现问题处理及反馈问题。

### 五、 总结报告

a) 上线成功后，撰写或总结系统需求、架构以及开发文档进行备案。
敏捷规划中，发布计划（ReleasePlan）是迭代之上的产品规划。根据需求规划制定的长期的发布规划，可制定1个或多个，以便控制产品的发布节奏。每个发布计划会开发出一个可以交付的版本。



| 发布顺序 | 系统名称 | 版本号 | 变更内容 | 风险等级 | 风险描述 | 风险控制 | 发布依赖 | 配置更新 | DDL  | DML  | 发布分支 | 开发人员 | 测试人员 |
| -------- | -------- | ------ | -------- | -------- | -------- | -------- | -------- | -------- | ---- | ---- | -------- | -------- | -------- |
|          |          |        |          |          |          |          |          |          |      |      |          |          |          |

 

SingPost sprint12 发布计划

I、影响范围

升级后端jar包 （文件名XXXXXXX）
升级前端web包（文件名XXXXXXX）
运行sql脚本（文件名XXXXXXX）
……
II、发布时间

2020年X月X日 X时XX分开始
III、参与人员

张三 （运维）
李四（开发）
王五 （测试验证）
赵六 （产品）
IV、发布准备

通知客户
上传后端jar包 （文件名XXXXXXX）
上传前端web包（文件名XXXXXXX）
上传sql脚本（文件名XXXXXXX）
V、发布过程

效验更新包（MD5SUM）
备份web容器html目录
修改安全组设置，只能允许深圳公司IP进入系统（根据实际需要，可选）
备份数据库（根据实际需要，可选）
更新应用镜像（执行已有shell脚本，脚本包含备份操作）
运行更新SQL脚本
验证新系统功能
修改安全组设置，解除只有深圳公司能访问的限制
发布版本发布说明release notes
VI、发布验证

验证xxxxxxxx状态
验证 API–xxxxxxxxxxx
验证创建不同类型自提点 （智能柜、温度柜）-
验证xxxxxxxxxx包裹-
VII、回退过程

将docker镜像回退到上个版本
还原备份数据
还原web前端
VIII、回退触发条件

在XX月xx日xx时前未通过验证点（1、2、3、4）
附一、数据库升级脚本

alfred_vXXXX.sql 【除了执行这个固定脚本，还需要小狼跑程序生成最新的脚本】

附二、软件安装包说明

服务器安装包：VX.X.X （所有模块全部更新）
Web安装包： VXX.X.X































1、目的
规范公司项目和产品的上线流程，建立和完善产品的版本控制，保证软件产品质量。
2、范围
适用于公司所有项目和产品
3、发布人员
开发环境由开发人员内部负责（包括维护和管理开发分支和git代码库）
测试环境由测试人员负责
预热环境由运维人员负责
正式环境由运维人员负责
*数据库操作均由DBA统一负责(或运维人员)
4、发布流程
在已开发完毕的各系统正式部署生产环境前要严格按照以下流程进行上线前检查。
一、 提交测试
a) 开发人员在功能开发完毕后首先配置开发环境，并将系统部署至开发环境。在开发环境经过自测通过后提交测试代码，并开始撰写上线方案。(上线方案须包括新增的外部应用程序安装，应用程序部署顺序及应用关联性、是否关闭其他应用服务，数据库脚本，制定合理的上线时间，涉及的服务影响范围以及上线失败的回滚步骤。)并提交相关技术负责人审核，在审核过后邮件给相关测试人员。
b) 测试人员根据模块功能文档并制定测试方案，测试用例，特别注意临界点测试方案。
c) 测试人员通过自动化部署平台根据提供的分支号依照上线方案进行自动化部署，涉及数据库操作可提请DBA操作。
d) 记录各种数据测试结果及测试问题，并交由相关开发人员进行二次迭代处理，该点须交付测试结果报告。
e) 内测完毕后交由相关业务及需求人员进行集成测试，并请测试人员记录测试结果及问题，交由相关开发人员进行再次迭代。该点须交付测试方案测试结果报告。
二、 预热发布
a) 测试人员在测试环境测试并跟踪修改bug达到上线标准（没有A、B级bug，C 级bug达到要求）时。开始部署预热环境，测试人员对现有功能在预热环境上进行验收测试（重新执行case）。紧急Bug修改走补丁/hotfix流程。不影响功能的bug留到下次版本解决，确认达到上线标准。
b) 如达到上线标准，测试人员发起邮件通知相关开发人员、产品人员，准备正式上线发布流程。
三、 正式上线
a) 在测试人员确认项目具备上线条件下，正式上线前，开发负责人须发起部署大会，召集相关开发人员、测试人员、产品人员、运维人员讨论此次部署事项(介绍项目的相应负责人员，数据库脚本执行，部署顺序，应用程序关联，部署时间点，部署回滚方案，包括数据库回滚和应用程序回滚)，最后生成会议纪要并发送邮件。
b) 确认上线之后，测试人员邮件上线方案，数据库脚本，应用分支号给运维人员及DBA，DBA应提前执行数据库脚本，应用部署须通过自动化部署平台进行部署，部署系统应在应用系统中记录当前分支号，以便后续应用回滚使用。在部署中出现错误，及时通知相关开发人员。如若问题不能在计划内时间解决，执行回滚方案。
c) 运维，DBA在操作完成时均需要回复邮件，并说明操作步骤结果。
d) 发布完成后运维人员回复邮件通知测试人员、业务及需求人员进行线上测试。测试结果及问题,提交至开发人员。如若出现问题不能在计划内时间解决，执行回滚方案，并进行迭代改进。
e) （紧急Bug修改走补丁/hotfix流程。不影响功能的bug留到下次版本解决。）。测试通过后测试人员回复邮件，发布结束。
四、 应用服务监控
a) 运维人员添加新增外部应用服务监控和新增云主机的系统监控
b) 运维人员对相关业务保持上线后正式生产系统进行有计划地监控其服务的性能和可用性，及时发现问题处理及反馈问题。
五、 总结报告
a) 上线成功后，撰写或总结系统需求、架构以及开发文档进行备案。
